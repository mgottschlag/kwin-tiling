
@startuml tiling-classdiagram.svg
skinparam classAttributeIconSize 0

class Tiling {
	-defaultLayout : LayoutType
	-availableLayouts : LayoutType
	-layouts : Layout[][]
	-desktopCount : int
	-screenCount : int
	-onNumberDesktopsChanged()
	-onNumberScreensChanged()
	-onCurrentDesktopChanged()
	-onNextLayout()
	-onPreviousLayout()
	-onFloatWindow()
	-onUnfloatWindow()
	-switchFocus(direction)
	-moveTile(direction)
}

class TileList {
	+addClient(client : Client) : Tile
	+getTile(client : Client) : Tile
	+tileAdded : Signal<Tile>
	+tileRemoved : Signal<Tile>
	-onClientAdded(client)
	-onClientRemoved(client)
	-onClientTabGroupChanged(client)
}

class Tile {
	-savedGeometry : Rect
	+clients : Client[]
	+floating : bool
	+forcedFloating : bool
	+tileIndex
	+Tile(firstClient, tileIndex)
	+setGeometry(geometry : Rect)
	+saveGeometry()
	+restoreGeometry()
	+getActiveClient()
	+syncCustomProperties()
	-updateForcedFloating()
	+movingStarted : Signal<Tile>
	+movingEnded : Signal<Tile>
	+movingStep : Signal<Tile>
	+resizingStarted : Signal<Tile>
	+resizingEnded : Signal<Tile>
	+resizingStep : Signal<Tile>
	+geometryChanged : Signal<Tile>
	+forcedFloatingChanged : Signal<Tile>
	+screenChanged : Signal<Tile>
	+desktopChanged : Signal<Tile>
	+onClientShadeChanged(client)
	+onClientGeometryChanged(client)
	+onClientKeepAboveChanged(client)
	+onClientKeepBelowChanged(client)
	+onClientFullScreenChanged(client)
	+onClientMinimizedChanged(client)
	+onClientMaximizedStateChanged(client, h, v)
	+onClientDesktopChanged(client)
	+onClientStartUserMovedResized(client)
	+onClientStepUserMovedResized(client)
	+onClientFinishUserMovedResized(client)
}

class Client {
	tiling_tileIndex : int
	tiling_floating : bool
}

abstract class Layout {
	+screenRectangle
	+desktop
	+{static}name
	+{static}image
	+{abstract}addTile(tile : Tile)
	+{abstract}removeTile(tile : Tile)
	+{abstract}restoreTile(tile : Tile)
	+{abstract}swapTiles(tile1 : Tile, tile2 : Tile)
	+{abstract}getAdjacentTile(from : Tile, direction) : Tile
	+{abstract}onClientChanges(tile : Tile, client : Client)
	+{abstract}getTile(client : Client)
	+getTile(x, y) : Tile
	+getTiles() : Tile[]
	+updateScreenSize()
	+updateAllTiles()
	+setLayoutArea(area : QRect)
}

class SpiralLayout {
}

class ZigZagLayout {
}

class ColumnLayout {
}

class RowLayout {
}

class GridLayout {
}

class MaximizedLayout {
}

class FloatingLayout {
}

Tiling "1" --> "1" TileList
Tiling "1" --> "*" Layout

TileList "1" --> "*" Tile

Tile "*" <-right-> "*" Layout
Tile "1" -left-> "*" Client

Layout <|-- SpiralLayout
Layout <|-- ZigZagLayout
Layout <|-- ColumnLayout
Layout <|-- RowLayout
Layout <|-- GridLayout
Layout <|-- MaximizedLayout
Layout <|-right- FloatingLayout

@enduml
